# SSE-friendly locations (include this from nginx.conf http{} block)

location /api/ {
  proxy_pass         http://backend:8000/api/;
  proxy_set_header   Host $host;
  proxy_set_header   X-Real-IP $remote_addr;
  proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_http_version 1.1;
  proxy_set_header   Connection "";
}

location ~ ^/api/v1/jobs/.*/events$ {
  proxy_pass                 http://backend:8000;
  proxy_set_header           Host $host;
  proxy_http_version         1.1;
  proxy_set_header           Connection '';
  proxy_buffering            off;
  proxy_cache                off;
  chunked_transfer_encoding  on;
  add_header                 Cache-Control no-cache;
}
